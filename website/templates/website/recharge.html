{% extends 'website/base.html' %}
{% load static %}

{% block main-content %}
<link rel="stylesheet" href="{% static 'css/recharge.css' %}">

<div class="recharge-container container">
    <section class="recharge-hero">
        <h1>üí≥ N·∫°p ti·ªÅn v√†o v√≠</h1>
        <p>N·∫°p ti·ªÅn ƒë·ªÉ s·ª≠ d·ª•ng c√°c d·ªãch v·ª• c·ªßa ch√∫ng t√¥i</p>
    </section>

    <section class="recharge-card">
        <form method="post" class="recharge-form">
            {% csrf_token %}

            <div class="grid-2">
                <!-- S·ªë ti·ªÅn n·∫°p -->
                <div class="form-field">
                    <label>{{ form.amount.label }}</label>
                    <div class="input-wrap">
                        {{ form.amount }}
                        <span class="suffix">VNƒê</span>
                    </div>
                    {% if form.amount.help_text %}
                    <div class="hint">{{ form.amount.help_text }}</div>
                    {% endif %}
                    {% if form.amount.errors %}
                    <div class="error">{{ form.amount.errors.0 }}</div>
                    {% endif %}
                </div>

                <!-- Ph∆∞∆°ng th·ª©c thanh to√°n -->
                <div class="form-field">
                    <label>{{ form.payment_method.label }}</label>
                    {{ form.payment_method }}
                    {% if form.payment_method.errors %}
                    <div class="error">{{ form.payment_method.errors.0 }}</div>
                    {% endif %}
                </div>
            </div>

            <!-- Ghi ch√∫ -->
            <div class="form-field">
                <label>{{ form.description.label }}</label>
                {{ form.description }}
                {% if form.description.help_text %}
                <div class="hint">{{ form.description.help_text }}</div>
                {% endif %}
                {% if form.description.errors %}
                <div class="error">{{ form.description.errors.0 }}</div>
                {% endif %}
            </div>

            <div class="actions">
                <button type="submit" class="btn-primary">üí≥ T·∫°o y√™u c·∫ßu n·∫°p ti·ªÅn</button>
            </div>
        </form>
    </section>

    <section class="info-card">
        <h3>‚ÑπÔ∏è H∆∞·ªõng d·∫´n n·∫°p ti·ªÅn</h3>
        <ul>
            <li>Sau khi t·∫°o y√™u c·∫ßu n·∫°p ti·ªÅn, b·∫°n s·∫Ω nh·∫≠n ƒë∆∞·ª£c m√£ giao d·ªãch</li>
            <li>Th·ª±c hi·ªán chuy·ªÉn kho·∫£n theo th√¥ng tin ƒë∆∞·ª£c cung c·∫•p</li>
            <li>Admin s·∫Ω x√°c nh·∫≠n v√† c·ªông ti·ªÅn v√†o v√≠ c·ªßa b·∫°n</li>
            <li>Th·ªùi gian x·ª≠ l√Ω: 1-24 gi·ªù l√†m vi·ªác</li>
            <li> L∆∞u √Ω : ti·ªÅn ƒë√£ n·∫°p th√¨ kh√¥ng th·ªÉ r√∫t ƒë∆∞·ª£c </li>
        </ul>
    </section>

    <section class="suggested-amounts">
        <h3>üí∞ G√≥i n·∫°p ti·ªÅn ƒë·ªÅ xu·∫•t</h3>
        <div class="amount-grid">
            <button type="button" class="btn-amount" data-value="100000"><span>100K</span><small>VNƒê</small></button>
            <button type="button" class="btn-amount" data-value="500000"><span>500K</span><small>VNƒê</small></button>
            <button type="button" class="btn-amount" data-value="1000000"><span>1M</span><small>VNƒê</small></button>
            <button type="button" class="btn-amount" data-value="2000000"><span>2M</span><small>VNƒê</small></button>
        </div>
    </section>
</div>

<script>
// G·∫Øn style cho input/select/textarea m·∫∑c ƒë·ªãnh c·ªßa Django form
document.addEventListener('DOMContentLoaded', function(){
    const scope = document.querySelector('.recharge-form');
    if(!scope) return;
    scope.querySelectorAll('input, select, textarea').forEach(el=>{
        el.classList.add('control');
    });

    // Ch·ªçn nhanh s·ªë ti·ªÅn
    document.querySelectorAll('.btn-amount').forEach(btn=>{
        btn.addEventListener('click', function(){
            const val = this.getAttribute('data-value');
            const input = document.getElementById('id_amount');
            if(input){ input.value = val; }
            document.querySelectorAll('.btn-amount').forEach(b=>b.classList.remove('active'));
            this.classList.add('active');
        });
    });
});

function submitMoMo(){
    var val = document.getElementById('id_amount').value || '';
    if(!val || parseInt(val) < 10000){
            alert('Vui l√≤ng nh·∫≠p s·ªë ti·ªÅn h·ª£p l·ªá (t·ªëi thi·ªÉu 10,000 VNƒê).');
            return;
    }
    var hidden = document.getElementById('momo_amount');
    if(hidden){ hidden.value = val; }
    var form = document.getElementById('momoForm');
    if(form){ form.submit(); }
}
</script>
{% endblock %}

